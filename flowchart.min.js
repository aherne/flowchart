class FlowchartConfigurer{#t={};setRectangleSizes(t,i){this.#t.rectangleWidth=t,this.#t.rectangleHeight=i}setArrowSizes(t,i){this.#t.arrowWidth=t,this.#t.arrowHeight=i}setLineSizes(t,i){this.#t.lineWidth=t,this.#t.lineHeight=i}setFontInfo(t,i){this.#t.fontFamily=t,this.#t.fontColor=i}getAll(){if(!(this.#t.hasOwnProperty("rectangleWidth")&&this.#t.hasOwnProperty("arrowWidth")&&this.#t.hasOwnProperty("lineWidth")&&this.#t.hasOwnProperty("fontFamily")))throw"Flowchart: using all setters is mandatory";return this.#t}}class FlowchartPositions{#i=[];addRow(t){if(this.#i.length>0&&this.#i[this.#i.length-1].length!=t.length)throw"Each row must have same columns number";this.#i.push(t)}getAll(){if(0==this.#i.length)throw"Flowchart: at least one row is mandatory";return this.#i}}class FlowchartCanvas{#e;#n;constructor(t,i,e,n){this.#e=n;var h=document.getElementById(t);h.width=i,h.height=e,this.#n=h.getContext("2d"),this.#n.clearRect(0,0,i,e)}#h(t,i,e,n){this.#n.beginPath(),this.#n.moveTo(t,i),this.#n.lineTo(e,n),this.#n.stroke()}drawRectangle(t,i,e){this.#n.lineWidth=1,this.#n.rect(t,i,this.#e.rectangleWidth,this.#e.rectangleHeight),this.#n.fillStyle=e,this.#n.strokeRect(t,i,this.#e.rectangleWidth,this.#e.rectangleHeight),this.#n.fillRect(t,i,this.#e.rectangleWidth,this.#e.rectangleHeight)}drawText(t,i,e,n,h){this.#n.font=this.#e.fontFamily,this.#n.textAlign="center",this.#n.textBaseline="middle",this.#n.fillStyle=h||this.#e.fontColor,this.#n.fillText(t,i,e,n)}drawHorizontalLine(t,i,e,n){this.#n.strokeStyle=n,this.#h(t,i,t+e,i),this.#n.strokeStyle="black"}drawVerticalLine(t,i,e,n){this.#n.strokeStyle=n,this.#h(t,i,t,i+e),this.#n.strokeStyle="black"}drawRightArrow(t,i,e){this.#n.fillStyle=e,this.#n.beginPath(),this.#n.moveTo(t,i),this.#n.lineTo(t-this.#e.arrowHeight,i-this.#e.arrowWidth),this.#n.lineTo(t-this.#e.arrowHeight,i+this.#e.arrowWidth),this.#n.fill(),this.#n.fillStyle="black"}drawLeftArrow(t,i,e){this.#n.fillStyle=e,this.#n.beginPath(),this.#n.moveTo(t,i),this.#n.lineTo(t+this.#e.arrowHeight,i-this.#e.arrowWidth),this.#n.lineTo(t+this.#e.arrowHeight,i+this.#e.arrowWidth),this.#n.fill(),this.#n.fillStyle="black"}drawTopArrow(t,i,e){this.#n.fillStyle=e,this.#n.beginPath(),this.#n.moveTo(t,i),this.#n.lineTo(t-this.#e.arrowWidth,i+this.#e.arrowHeight),this.#n.lineTo(t+this.#e.arrowWidth,i+this.#e.arrowHeight),this.#n.fill(),this.#n.fillStyle="black"}drawBottomArrow(t,i,e){this.#n.fillStyle=e,this.#n.beginPath(),this.#n.moveTo(t,i),this.#n.lineTo(t+this.#e.arrowWidth,i-this.#e.arrowHeight),this.#n.lineTo(t-this.#e.arrowWidth,i-this.#e.arrowHeight),this.#n.fill(),this.#n.fillStyle="black"}getDriver(){return this.#n}}class Flowchart{#s={};#l=5;#o=5;#c;#e;constructor(t,i,e){this.#e=i;let n=this.#o+i.lineHeight/2;for(var h=0;h<t.length;h++){let e=n+h*(i.rectangleHeight+i.lineHeight);for(var s=0;s<t[h].length;s++)if(""!=t[h][s]){let n=this.#l+s*(i.rectangleWidth+i.lineWidth);this.#s[t[h][s]]={x:n,y:e}}}let l=2*this.#l+t[0].length*(i.rectangleWidth+i.lineWidth)-i.lineWidth,o=2*n+t.length*(i.rectangleHeight+i.lineHeight)-i.lineHeight;this.#c=new FlowchartCanvas(e,l,o,i)}#r(t,i,e,n,h,s,l,o){let c=l?this.#e.rectangleWidth:0,r=this.#s[t].y+n*this.#e.rectangleHeight-this.#s[i].y-h*this.#e.rectangleHeight,a=0;o?(a=this.#s[t].x-s*this.#e.lineWidth,console.log(a),this.#c.drawHorizontalLine(this.#s[t].x,this.#s[t].y+this.#e.rectangleHeight*n,-s*this.#e.lineWidth,e)):(a=this.#s[t].x+this.#e.rectangleWidth+s*this.#e.lineWidth,this.#c.drawHorizontalLine(this.#s[t].x+this.#e.rectangleWidth,this.#s[t].y+this.#e.rectangleHeight*n,s*this.#e.lineWidth,e)),this.#c.drawVerticalLine(a,this.#s[i].y+this.#e.rectangleHeight*h,r,e),this.#c.drawHorizontalLine(a,this.#s[i].y+this.#e.rectangleHeight*h,this.#s[i].x+c-a,e),l?this.#c.drawLeftArrow(this.#s[i].x+c,this.#s[i].y+this.#e.rectangleHeight*h,e):this.#c.drawRightArrow(this.#s[i].x,this.#s[i].y+this.#e.rectangleHeight*h,e)}#a(t,i,e,n,h,s,l,o){let c=this.#s[t].x+n*this.#e.rectangleWidth,r=this.#s[t].y+(o?0:this.#e.rectangleHeight),a=this.#s[i].x+h*this.#e.rectangleWidth,g=this.#s[i].y+(l?this.#e.rectangleHeight:0);this.#c.drawVerticalLine(c,r,-s,e),this.#c.drawHorizontalLine(c,r-s,a-c,e),this.#c.drawVerticalLine(a,g,r-s-g,e),l?this.#c.drawTopArrow(a,g,e):this.#c.drawBottomArrow(a,g,e)}#g(t,i,e,n,h,s,l){let o=s?this.#e.rectangleHeight:0,c=l?0:this.#e.rectangleWidth,r=this.#s[t].y+n*this.#e.rectangleHeight-this.#s[i].y-o,a=this.#s[i].x-this.#s[t].x+h*this.#e.rectangleWidth-c;this.#c.drawHorizontalLine(this.#s[t].x+c,this.#s[t].y+this.#e.rectangleHeight*n,a,e),this.#c.drawVerticalLine(this.#s[i].x+h*this.#e.rectangleWidth,this.#s[i].y+o,r,e),s?this.#c.drawTopArrow(this.#s[i].x+h*this.#e.rectangleWidth,this.#s[i].y+o,e):this.#c.drawBottomArrow(this.#s[i].x+h*this.#e.rectangleWidth,this.#s[i].y,e)}#f(t,i,e,n,h,s,l){let o=this.#s[i].y-this.#s[t].y+h*this.#e.rectangleHeight-(l?0:this.#e.rectangleHeight),c=this.#s[i].x-this.#s[t].x-n*this.#e.rectangleWidth+(s?this.#e.rectangleWidth:0);var r=s?this.#e.rectangleWidth:0;let a=this.#s[t].x+n*this.#e.rectangleWidth;this.#c.drawVerticalLine(a,this.#s[t].y+(l?0:this.#e.rectangleHeight),o,e),this.#c.drawHorizontalLine(a,this.#s[t].y+o+(l?0:this.#e.rectangleHeight),c,e),s?this.#c.drawLeftArrow(this.#s[i].x+(s?this.#e.rectangleWidth:0),this.#s[i].y+this.#e.rectangleHeight*h,e):this.#c.drawRightArrow(this.#s[i].x+r,this.#s[i].y+this.#e.rectangleHeight*h,e)}rectangle(t,i){this.#c.drawRectangle(this.#s[t].x,this.#s[t].y,i),this.#c.drawText(t,this.#s[t].x+this.#e.rectangleWidth/2,this.#s[t].y+this.#e.rectangleHeight/2,this.#e.rectangleWidth)}text(t,i,e=.5){this.#c.drawText(t,this.#s[t].x+this.#e.rectangleWidth/2,this.#s[t].y+this.#e.rectangleHeight*e,this.#e.rectangleWidth,i)}lineRightLeft(t,i,e,n=.5){let h=this.#s[i].x-this.#s[t].x-this.#e.rectangleWidth;this.#c.drawHorizontalLine(this.#s[t].x+this.#e.rectangleWidth,this.#s[t].y+this.#e.rectangleHeight*n,h,e),this.#c.drawRightArrow(this.#s[i].x,this.#s[i].y+this.#e.rectangleHeight*n,e)}lineLeftRight(t,i,e,n=.5){let h=this.#s[t].x-this.#s[i].x-this.#e.rectangleWidth;this.#c.drawHorizontalLine(this.#s[i].x+this.#e.rectangleWidth,this.#s[i].y+this.#e.rectangleHeight*n,h,e),this.#c.drawLeftArrow(this.#s[i].x+this.#e.rectangleWidth,this.#s[i].y+this.#e.rectangleHeight*n,e)}lineTopBottom(t,i,e,n=.5){let h=this.#s[t].y-this.#s[i].y-this.#e.rectangleHeight;this.#c.drawVerticalLine(this.#s[t].x+this.#e.rectangleWidth*n,this.#s[t].y,-h,e),this.#c.drawTopArrow(this.#s[i].x+this.#e.rectangleWidth*n,this.#s[i].y+this.#e.rectangleHeight,e)}lineBottomTop(t,i,e,n=.5){let h=this.#s[i].y-this.#s[t].y-this.#e.rectangleHeight;this.#c.drawVerticalLine(this.#s[i].x+this.#e.rectangleWidth*n,this.#s[i].y,-h,e),this.#c.drawBottomArrow(this.#s[i].x+this.#e.rectangleWidth*n,this.#s[i].y,e)}lineLeftLineLeft(t,i,e,n=.5,h=.5,s=.5){this.#r(t,i,e,n,h,s,!1,!0)}lineLeftLineRight(t,i,e,n=.5,h=.5,s=.5){this.#r(t,i,e,n,h,s,!0,!0)}lineLeftLineTop(t,i,e,n=.5,h=.5){this.#g(t,i,e,n,h,!1,!0)}lineLeftLineBottom(t,i,e,n=.5,h=.5){this.#g(t,i,e,n,h,!0,!0)}lineRightLineLeft(t,i,e,n=.5,h=.5,s=.5){this.#r(t,i,e,h,n,s,!1,!1)}lineRightLineRight(t,i,e,n=.5,h=.5,s=.5){this.#r(t,i,e,n,h,s,!0,!1)}lineRightLineTop(t,i,e,n=.5,h=.5){this.#g(t,i,e,n,h,!1,!1)}lineRightLineBottom(t,i,e,n=.5,h=.5){this.#g(t,i,e,n,h,!0,!1)}lineTopLineLeft(t,i,e,n=.5,h=.5){this.#f(t,i,e,n,h,!1,!0)}lineTopLineRight(t,i,e,n=.5,h=.5){this.#f(t,i,e,n,h,!0,!0)}lineTopLineTop(t,i,e,n=.5,h=.5,s=.5){let l=this.#s[i].y>=this.#s[t].y?this.#e.lineHeight*s:this.#s[t].y-this.#s[i].y+this.#e.lineHeight*s;this.#a(t,i,e,n,h,l,!1,!0)}lineTopLineBottom(t,i,e,n=.5,h=.5,s=.5){let l=this.#s[i].y<=this.#s[t].y?this.#e.lineHeight*s:this.#s[t].y-this.#s[i].y+this.#e.rectangleHeight+this.#e.lineHeight*s;this.#a(t,i,e,n,h,l,!0,!0)}lineBottomLineLeft(t,i,e,n=.5,h=.5){this.#f(t,i,e,n,h,!1,!1)}lineBottomLineRight(t,i,e,n=.5,h=.5){this.#f(t,i,e,n,h,!0,!1)}lineBottomLineTop(t,i,e,n=.5,h=.5,s=.5){let l=-(this.#s[i].y>=this.#s[t].y?this.#e.lineHeight*s:this.#s[t].y-this.#s[i].y+this.#e.lineHeight*s);this.#a(t,i,e,n,h,l,!1,!1)}lineBottomLineBottom(t,i,e,n=.5,h=.5,s=.5){let l=-(this.#s[i].y>=this.#s[t].y?this.#e.lineHeight*s+(this.#s[i].y-this.#s[t].y):this.#e.lineHeight*s);this.#a(t,i,e,n,h,l,!0,!1)}getDriver(){return this.#c.getDriver()}}
